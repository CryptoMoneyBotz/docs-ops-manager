---
title: Rotating Certificates
owner: Ops Manager
---

This topic describes how to check the expiration date of and rotate certificate authorities (CAs) and leaf certificates
in <%= vars.platform_old_pivotal %> (<%= vars.platform_code_pivotal %>).

This includes the <%= vars.ops_manager %> root CA, BOSH NATS CA, and leaf certificates in <%= vars.platform_code_pivotal %> that
are visible to the <%= vars.ops_manager %> API.

<p class='note warning'><strong>Warning:</strong> The rotation procedures described in this topic do not work if the certificates have already expired. If the certificates have expired, contact <a href="https://support.pivotal.io/">Pivotal Support</a> for guidance.</p>

For information about rotating IPsec certificates, see
[Rotating IPsec Certificates](https://docs.pivotal.io/addon-ipsec/credentials.html).


## <a id='overview'></a> Overview

The <%= vars.ops_manager %> API manages and lists internal CAs and leaf certificates that enable
<%= vars.platform_code_pivotal %> components to communicate with each other securely using TLS. It can also list certificates
used externally, such as SAML certificates that authenticate to an external identity provider (IDP).

For more information about the CAs and leaf certificates visible to the <%= vars.ops_manager %> API, see
[Certificate Types](certificate-types.html).

Rotate CAs and leaf certificates before they expire to avoid downtime for your foundation.


## <a id='procedure'></a> Procedure

This section explains how to rotate the <%= vars.ops_manager %> root CA, BOSH NATS CA, and leaf certificates in
<%= vars.platform_code_pivotal %>.

<p class="note"><strong>Note:</strong> The BOSH NATS CA is automatically rotated when you rotate the <%= vars.ops_manager %> root CA. For more information, see <a href="certificate-types.html">Certificate Types</a>.</p>

To rotate certificates in <%= vars.platform_code_pivotal %>, you first check the expiration dates of all certificates. Then,
based on the types of certificates that expire soon, you follow a certificate rotation procedure to replace expiring
certificates and redeploy BOSH to apply changes.

To rotate CAs and leaf certificates:

1. Check the expiration dates of the <%= vars.ops_manager %> root CA and leaf certificates, and identify the types of leaf certificates that require rotation. For more information, see [Checking Expiration Dates and Certificate Types](check-expiration.html).

1. Rotate the certificates that expire soon. For more information, see [Rotate Certificates](#rotate) below.


## <a id='rotate'></a> Rotate Certificates

This section includes procedures for rotating CAs and leaf certificates. There are different rotation procedures for each type of certificate that requires rotation.

You can determine which rotation procedure to follow based on the types of certificates in your foundation that must be rotated. For more information about identifying the types of certificates in your foundation that expire soon, see [Checking Expiration Dates and Certificate Types](check-expiration.html).

To rotate certificates, follow one of these procedures:

* To rotate non-rotatable certificates, contact [Pivotal Support](https://support.pivotal.io).

* To rotate the <%= vars.ops_manager %> root CA and leaf certificates, see [Rotating the Root CA and Leaf Certificates](rotate-cas-and-leaf-certs.html). This procedure also rotates the BOSH NATS CA.

* To rotate non-configurable leaf certificates, but not the <%= vars.ops_manager %> root CA or BOSH NATS CA, see [Rotate Non-Configurable Leaf Certificates](rotate-non-configurable-certs.html).

* To rotate configurable leaf certificates, but not the <%= vars.ops_manager %> root CA or BOSH NATS CA, see [Rotate Configurable Leaf Certificates](rotate-configurable-certs.html).

* To rotate the `/services/tls_ca` certificate, see [Rotating the Services TLS CA and Its Leaf Certificates](services_tls_ca_rotate.html).
